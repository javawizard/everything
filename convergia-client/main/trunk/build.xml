<?xml version="1.0"?>
<!-- ====================================================================== 
     Jan 1, 2008 2:34:47 AM                                                        

     project    
     description
                   
     Alexander Boyd                                                              
     ====================================================================== -->
<project name="InTouch3">
	<description>

	</description>

	<!-- ================================= 
          target: default              
         ================================= -->
	<target name="jar" description="creates a jar file, excluding the folder appdata and the jar file convergiaupdates.jar, and saves it to intouch3updates.jar">
		<jar destfile="convergiaupdates.jar">
			<fileset dir=".">
				<include name="**/*" />
				<exclude name="convergiaupdates.jar" />
				<exclude name="intouch3updates.jar"/>
				<exclude name="appdata/**/*" />
				<exclude name="plugins/**/*" />
				<exclude name="bin/plugins/**/*" />
				<exclude name="bin/appdata/**/*" />
				<exclude name="docs/**/*" />
				<exclude name="bin/docs/**/*" />
				<exclude name="bin/convergiaupdates.jar" />
				<exclude name="bin/intouch3updates.jar" />
			</fileset>
		</jar>
	</target>

	<target name="upload" depends="jar" description="creates a jar file, then uploads it to the server. the update versionindex will be incremented by one.">
		<get dest="tmpupd.properties" src="http://trivergia.com:8080/convergiaupdates.properties" />
		<java classpath="bin" fork="true" failonerror="true" dir="." classname="com.trivergia.intouch3.uploader.IVersion">
		</java>
		<exec executable="cmd.exe" failonerror="true">
			<arg value="/C" />
			<arg value="start" />
			<arg value='"Convergia Upload"' />
			<arg value="/WAIT" />
			<arg value="C:/cygwin/bin/scp" />
			<arg value="-i" />
			<arg value='"/c/Users/mboyd/id_rsa"' />
			<arg value="-r" />
			<arg value="convergiaupdates.jar" />
			<arg value="root@trivergia.com:/apache/tomcat-i/webapps/ROOT/convergiaupdates.jar" />
		</exec>
		<exec executable="cmd.exe" failonerror="true">
			<arg value="/C" />
			<arg value="start" />
			<arg value='"Convergia Updates"' />
			<arg value="/WAIT" />
			<arg value="C:/cygwin/bin/scp" />
			<arg value="-i" />
			<arg value='"/c/Users/mboyd/id_rsa"' />
			<arg value="-r" />
			<arg value="convergiaupdates.properties" />
			<arg value="root@trivergia.com:/apache/tomcat-i/webapps/ROOT" />
		</exec>
	</target>

</project>
