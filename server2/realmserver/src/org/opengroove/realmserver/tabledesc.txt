This document describes all of the tables that the realm server uses in it's database.


webusers:

This table contains the users that can manage this realm server from the web. This is entirely unrelated to the OpenGroove users registered to this realm server.

username varchar(64) The user's username
role varchar(32) The role of this user. Currently only admin is allowed.
password varchar(200) The hex representation of the SHA-512 of the password for this user



configuration:

This table holds general configuration of the server, such as whether or not registration is open, This server's name and description in the OpenGroove realm server directory, etc.

name varchar(64) The name of this configuration setting
value varchar(1024) The value of this configuration setting



users:

This table holds the users that are signed up with this realm server.

username varchar(64) The username of this user.
password varchar(200) The hex representation of the SHA-512 of the password for this user



usersettings:

This table holds settings that a user specifies. A user can set settings for their account to allow multiple computers to be able to download this information. Settings who's name start with public- can be viewed (but not edited) by anyone, and all other settings can only be viewed and edited by the user themselves. A user cannot have more than 256KB total of settings. This includes a 64-byte overhead for each setting, the length of the key, and the length of the value.

username varchar(64) The username of the user that this setting is for
name varchar(64) The name of this particular setting
value varchar(512) The value of this setting



computers:

This table holds the computers that are registered for each user.

username varchar(64) The username of the user that this computer is registered to
computername varchar(64) The name of this computer



storedmessages:

This table holds the list of stored messages that are queued on this realm server right now. It doesn't actually contain the message data (except for the message's metadata, which is limited to 1024 characters total), only a path to a folder where the message is stored. The path is of the format servername/path/to/folder . path/to/folder can be any path, and is relative to the specified server's data storage folder. servername is the name of the data server that the path is on, a servername of local indicates this realm server.

id varchar(128) The id of the message. It's recommended that this start with the userid of the sender of the message, to avoid message id collisions.
sender varchar(64) The username (or userid if the message is from a user not on this realm server) of the message's sender.
recipient varchar(64) The username (or userid if the message is from a user not on this realm server) of the message's intended recipient.
fromcomputer varchar(64)  The name of the computer that sent this message, the empty string if unavailable
tocomputer varchar(64) The name of the computer that the message is intended for, the empty string to indicate that it's for all computers of the user specified. If a target computer is specified, all computers of that user will still have access to the message, but they can see that the message is not directly intended for them, and the message will be deleted if the intended computer soft-deletes it instead of requiring all online users to soft-delete it.
finalized boolean True if the message is finalized, false if it is not. If the sender is a user from a different realm server, then this should always be true. If a message is finalized, this means that the complete contents of the message have been uploaded and the message is ready to be sent off on it's way, or, if the recipient is on this realm server, that the message has been downloaded from the sending realm server and is available for download.
accessed boolean True if the recipient of the message has accessed it at least once, usually indicating that it's trying to receive it.
metadata varchar(1192) the metadata of the message, in the format of Properties.store(). The metadata itself should be restricted to 1024B, but java adds a bunch of comments and stuff into the properties file format so the extra space is to allow for that.



softdeletes

This table stores when a computer soft-deletes a particular message.

id varchar(128) the id of the message, from which, using the stored messages table, the username can be derived
computername varchar(64) the name of the computer that has soft-deleted this message















